!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("@angular/forms")):"function"==typeof define&&define.amd?define("ngx-mistakes",["exports","@angular/core","rxjs","rxjs/operators","@angular/forms"],t):t((r=r||self)["ngx-mistakes"]={},r.ng.core,r.rxjs,r.rxjs.operators,r.ng.forms)}(this,function(r,t,e,o,n){"use strict";function i(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var o,n,i=e.call(r),s=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(r){n={error:r}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(n)throw n.error}}return s}function s(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(i(arguments[t]));return r}var c=function(r){return Array.isArray(r)?r:[r]},a=function(){function r(r){this.form=r,this.subject=new e.BehaviorSubject(null),this.ready=!1}return Object.defineProperty(r.prototype,"errors",{get:function(){if(this.ready)return this.control.errors},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hasErrors",{get:function(){return!!this.errors},enumerable:!0,configurable:!0}),r.prototype.hasError=function(r,t){return this.checkPropState("invalid",r,t)},r.prototype.isValid=function(r,t){return this.checkPropState("valid",r,t)},r.prototype.getError=function(r){if(this.ready)return this.control.getError(r)},r.prototype.checkPropState=function(r,t,e){var o=this;if(this.ready){var n=!e||c(e).every(function(r){return o.control[r]});return"*"===t.charAt(0)?this.control[r]&&n:"valid"===r?!this.control.hasError(t):this.control.hasError(t)&&n}},r.prototype.checkStatus=function(){var r=this.control,t=r.errors;if(this.ready=!0,t)for(var e in t)this.subject.next({control:r,errorName:e})},r.prototype.ngOnChanges=function(){this.control=this.form.control.get(this.controlName)},r.prototype.ngAfterViewInit=function(){var r=this;setTimeout(function(){r.checkStatus(),r.control.statusChanges.subscribe(r.checkStatus.bind(r))})},r.prototype.ngOnDestroy=function(){this.subject.unsubscribe()},r.decorators=[{type:t.Directive,args:[{selector:"[ngxErrors]",exportAs:"ngxErrors"}]}],r.ctorParameters=function(){return[{type:n.FormGroupDirective}]},r.propDecorators={controlName:[{type:t.Input,args:["ngxErrors"]}]},r}();var u=function(){function r(r){this.ngxErrors=r,this.hidden=!0,this.rules=[],this.errorNames=[]}return Object.defineProperty(r.prototype,"ngxError",{set:function(r){this.errorNames=c(r)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"when",{set:function(r){this.rules=c(r)},enumerable:!0,configurable:!0}),r.prototype.ngOnInit=function(){var r=this;this._states=new e.Subject,this.states=this._states.asObservable().pipe(o.distinctUntilChanged());var t=this.ngxErrors.subject.pipe(o.filter(function(r){return!!r}),o.filter(function(t){return!!~r.errorNames.indexOf(t.errorName)})),n=this.states.pipe(o.map(function(t){return r.rules.every(function(r){return!!~t.indexOf(r)})}));this.subscription=e.combineLatest([n,t]).subscribe(function(t){var e=i(t,2),o=e[0],n=e[1];r.hidden=!(o&&n.control.hasError(n.errorName))})},r.prototype.ngDoCheck=function(){var r=this;this._states.next(this.rules.filter(function(t){return r.ngxErrors.control[t]}))},r.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},r.decorators=[{type:t.Directive,args:[{selector:"[ngxError]"}]}],r.ctorParameters=function(){return[{type:a,decorators:[{type:t.Inject,args:[t.forwardRef(function(){return a})]}]}]},r.propDecorators={ngxError:[{type:t.Input}],when:[{type:t.Input}],hidden:[{type:t.HostBinding,args:["hidden"]}]},r}();var p=[u,a],f=function(){function r(){}return r.decorators=[{type:t.NgModule,args:[{declarations:s(p),exports:s(p)}]}],r}(),h=function(){function r(r){this.form=r,this.subject=new e.BehaviorSubject(null),this.ready=!1}return Object.defineProperty(r.prototype,"errors",{get:function(){if(this.ready)return this.control.errors},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hasErrors",{get:function(){return!!this.errors},enumerable:!0,configurable:!0}),r.prototype.hasError=function(r,t){return this.checkPropState("invalid",r,t)},r.prototype.isValid=function(r,t){return this.checkPropState("valid",r,t)},r.prototype.getError=function(r){if(this.ready)return this.control.getError(r)},r.prototype.checkPropState=function(r,t,e){var o=this;if(this.ready){var n=!e||c(e).every(function(r){return o.control[r]});return"*"===t.charAt(0)?this.control[r]&&n:"valid"===r?!this.control.hasError(t):this.control.hasError(t)&&n}},r.prototype.checkStatus=function(){var r=this.control,t=r.errors;if(this.ready=!0,t)for(var e in t)this.subject.next({control:r,errorName:e})},r.prototype.ngOnChanges=function(){if(this.arr&&!isNaN(this.idx)){var r=this.form.control.get(this.arr);if(r){var t=r.at(this.idx);t&&(this.control=t.get(this.controlName))}}else this.control=this.form.control.get(this.controlName)},r.prototype.ngAfterViewInit=function(){var r=this;setTimeout(function(){r.checkStatus(),r.control.statusChanges.subscribe(r.checkStatus.bind(r))})},r.prototype.ngOnDestroy=function(){this.subject.unsubscribe()},r.decorators=[{type:t.Directive,args:[{selector:"[ngxErrors]",exportAs:"ngxErrors"}]}],r.ctorParameters=function(){return[{type:n.FormGroupDirective}]},r.propDecorators={controlName:[{type:t.Input,args:["ngxErrors"]}],arr:[{type:t.Input}],idx:[{type:t.Input}]},r}();var l=function(){function r(r){this.ngxMistakes=r,this.hidden=!0,this.rules=[],this.errorNames=[]}return Object.defineProperty(r.prototype,"ngxError",{set:function(r){this.errorNames=c(r)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"when",{set:function(r){this.rules=c(r)},enumerable:!0,configurable:!0}),r.prototype.ngOnInit=function(){var r=this;this._states=new e.Subject,this.states=this._states.asObservable().pipe(o.distinctUntilChanged());var t=this.ngxMistakes.subject.pipe(o.filter(function(r){return!!r}),o.filter(function(t){return!!~r.errorNames.indexOf(t.errorName)})),n=this.states.pipe(o.map(function(t){return r.rules.every(function(r){return!!~t.indexOf(r)})}));this.subscription=e.combineLatest([n,t]).subscribe(function(t){var e=i(t,2),o=e[0],n=e[1];r.hidden=!(o&&n.control.hasError(n.errorName))})},r.prototype.ngDoCheck=function(){var r=this;this._states.next(this.rules.filter(function(t){return r.ngxMistakes.control[t]}))},r.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},r.decorators=[{type:t.Directive,args:[{selector:"[ngxError]"}]}],r.ctorParameters=function(){return[{type:h,decorators:[{type:t.Inject,args:[t.forwardRef(function(){return h})]}]}]},r.propDecorators={ngxError:[{type:t.Input}],when:[{type:t.Input}],hidden:[{type:t.HostBinding,args:["hidden"]}]},r}();var y=[l,h],g=function(){function r(){}return r.decorators=[{type:t.NgModule,args:[{declarations:s(y),exports:s(y)}]}],r}();r.NgxErrorDirective=u,r.NgxErrorsDirective=a,r.NgxErrorsModule=f,r.NgxMistakeDirective=l,r.NgxMistakesDirective=h,r.NgxMistakesModule=g,Object.defineProperty(r,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-mistakes.umd.min.js.map